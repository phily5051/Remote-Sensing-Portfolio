<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Phil’s remote sensing learning diary - 7&nbsp; Classification II</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./week_8.html" rel="next">
<link href="./week_6.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Classification II</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Phil’s remote sensing learning diary</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Hello!</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">SAR Sensor</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_3.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Corrections</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_4.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Policy</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_5.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Introduction to Google Earth Engine</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_6.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Classification I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_7.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Classification II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_8.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Urban Heat Island</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Classification II</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<h2 class="anchored">
7.1 Summary
</h2>
<p>In this section, I am going to give an overall idea of how Machine Learning (ML) classification algorithm works, explain the basic concept of sub pixel analysis and how to assess the accuracy of the models we build.</p>
<h3 class="anchored">
7.1.1 Remote Sensing ML Classification Methods In a Nutshell
</h3>
<ul>
<li><strong>Building a ML model in Remote Sensing</strong>: I drew the image below to illustrate the general idea of how ML models are built in remote sensing. The pixel values are extracted from <u>Region of Interest (ROI)</u>, and the data are stored in a tabular format. Each row contains the values of each pixel. The output value (land cover type) that we are trying to predict is called ‘<u>Label</u>’, and the input data is ‘<u>Features</u>’. 70% of the values are used for training a model, the rest is withheld for testing the accuracy of the model.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/drawing.jpg" style="width:80.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">ML Classification Model in a Nutshell</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p><strong>Any considerations?</strong>:</p>
<ul>
<li>For generalizability, better use <u>multi-year data</u>, rather than data from one single year</li>
<li>Understanding of <u>spatial autocorrelation</u></li>
<li>Hard vs Soft classification</li>
</ul></li>
<li><p><em>A bit of thought…..</em></p>
<p>So far, the classification methods we covered are at a per pixel approach, which assumes that a pixel contains only one land type. However, in reality, this is hardly true as each pixel can consist of different types of land. If we are doing a research, don’t we need to set <u>detailed criteria or reasons to say a certain pixel a specific land type</u> when building a model and share this with people?</p></li>
</ul>
<h3 class="anchored">
7.1.2 Spectral Mixture Analysis (SMA)
</h3>
<ul>
<li><strong>Definition</strong>: SMA is a sub-pixel analysis technique which <u>estimates the proportion of different land covers within a pixel based on their spectral signatures</u> <span class="citation" data-cites="manolakislockwoodcooley2016">(<a href="references.html#ref-manolakislockwoodcooley2016" role="doc-biblioref">Manolakis, Lockwood, and Cooley 2016</a>)</span>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/sma.png" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">A pixel of 3 mixture components (Source: <a href="https://www.researchgate.net/figure/Perfect-decomposition-with-a-Linear-Spectral-Mixture-Model-LSMM-on-a-30-m-pixel-formed_fig6_259715697">Machado and Small, 2013</a>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p><strong>Assumption</strong>: <u>The reflectance spectrum of a pixel is a linear sum of the reflectance spectra of Endmembers</u> (different land cover types) present within that pixel <span class="citation" data-cites="articlea">(<a href="references.html#ref-articlea" role="doc-biblioref">Roberts et al. 1998</a>)</span>.</p>
<p><em>Note</em>. <u>Endmembers</u> are spectrally-pure pixels which have homogeneous land cover, and there are typically only a few of them.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/vis.jpg" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">The V-I-S (Vegetation-Impervious surface-Soil) model of Ridd (1995) (Source: <a href="https://www.researchgate.net/publication/312194814_Comparison_of_Eastern_and_Western_Europe_spatial_development_of_cities_based_on_Remote_sensing_data">Leśko, 2013</a>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p><em>Any considerations?</em>:</p>
<ul>
<li>Number of Endmembers</li>
<li>Pixel purity</li>
</ul></li>
<li><p><em>A bit of thought…..</em></p>
<p>Can we really tell that <u>Endmembers are representative of each land cover type?</u> In previous lecture on signature reflectance, there was disparities in signature reflectance even between the same land cover type. For example, different tree species had different signature reflectance.</p></li>
</ul>
<h3 class="anchored">
7.1.3 Accuracy Assessment
</h3>
<ol type="1">
<li><p><strong>Error matrix</strong>:</p>
<ul>
<li><p><u>Producer accuracy (Recall)</u>:</p>
<ul>
<li>How often are a map maker’s classification of real features on the ground is correct</li>
<li><span class="math inline">\(TP\)</span> / <span class="math inline">\(TP\)</span> + <span class="math inline">\(FN\)</span></li>
</ul></li>
<li><p><u>User accuracy (Precision)</u>:</p>
<ul>
<li>How often the class on the map will actually be present on the ground</li>
<li><span class="math inline">\(TP\)</span> / <span class="math inline">\(TP\)</span> + <span class="math inline">\(FP\)</span></li>
</ul></li>
<li><p><u>Overall accuracy (OA)</u>:</p>
<ul>
<li>How well a map accurately represents all the reference sites</li>
<li><span class="math inline">\(TP\)</span> <span class="math inline">\(+\)</span> <span class="math inline">\(TN\)</span> / <span class="math inline">\(TP + FP + FN + TN\)</span></li>
</ul></li>
</ul></li>
<li><p><strong>F1</strong>:</p>
<ul>
<li>Combines both recall and precision</li>
<li><span class="math inline">\(F1 = 2 * Precision * Recall / Precision + Recall\)</span></li>
</ul></li>
</ol>
<h2 class="anchored">
7.2 Application
</h2>
<p>All ML models need to be tested with withheld data to avoid over-fitting issues. When it comes to ML classification models in remote sensing, however, this is not enough!. There is another factor that we have to consider…</p>
<p><strong>Spatial autocorrelation</strong>!!</p>
<p><span class="citation" data-cites="tobler">Tobler (<a href="references.html#ref-tobler" role="doc-biblioref">1970</a>)</span> argued the first law of geography is that <u>near things are more closely related than distant things</u>. Even if we split our spatial data into training and test data, there will always be “possibilities of spatial autocorrelation”.</p>
<h3 class="anchored">
7.2.1 Spatial dependence between training and test sets: another pitfall of classification accuracy assessment in remote sensing
</h3>
<ul>
<li><p><strong>Summary</strong>: <span class="citation" data-cites="karasiak">Karasiak et al. (<a href="references.html#ref-karasiak" role="doc-biblioref">2021</a>)</span> discuss <u>how spatial autocorrelation affects remote sensing image classification and emphasizes the need to account for spatial independence between training and test sets to avoid overestimating the model’s generalization capabilities.</u> The authors built a random forest (RF) model to classify forest stands. The research team compares the overall accuracy (OA) of six cross-validation (CV) strategies with different sample sizes - pixel and object levels, and demonstrates that spatial leave-one-out cross-validation is the most effective approach to obtaining unbiased estimates of predictive error.</p></li>
<li><p><strong>Main Findings</strong>:</p>
<ul>
<li><p>Ignoring spatial autocorrelation <u>resulted in a high accuracy - overfitting-</u> in both sample levels</p></li>
<li><p><u>Non-spatial LOO or <em>k</em> - fold CV at the object level can mitigate the effect of spatial autocorrelation, when the number of sample size is not too large</u> (50 forest stands)</p>
<ul>
<li>If the number of sample increases (over 500 forest stands), the distance between forest stands reduces, leading to increased effect of spatial dependence between training and test datasets</li>
</ul></li>
<li><p><u>Spatial LOO CV is a better choice</u></p></li>
</ul></li>
<li><p><strong>Comment</strong>:</p>
<p>This paper emphasises <u>the importance of spatial autocorrelation and spatial independence between training and test datasets in accuracy assessment</u>. The authors show that traditional non-spatial cross-validation methods can lead to overestimating accuracy, and spatial cross-validation provides better estimates of predictive error.</p></li>
<li><p><strong>Limitation</strong>: However, the paper has <u>limitations in terms of its generalizability to other types of remote sensing imagery and classification tasks since it only focuses on forest classification using Sentinel-2 data</u>. Furthermore, the authors did not provide a thorough analysis of the proposed approach’s limitations and the possible trade-offs between accuracy and computational efficiency. Further research is necessary to validate the proposed approach in various contexts and to investigate its potential drawbacks and trade-offs.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/rs_cv.jpg" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Average OA accuracy for each CV strategies (Source: <a href="https://www.researchgate.net/publication/351106376_Spatial_dependence_between_training_and_test_sets_another_pitfall_of_classification_accuracy_assessment_in_remote_sensing">Karasiak et al, 2021</a>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/rs_learningcurve.jpg" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Learning curve for each CV strategies (Source: <a href="https://www.researchgate.net/publication/351106376_Spatial_dependence_between_training_and_test_sets_another_pitfall_of_classification_accuracy_assessment_in_remote_sensing">Karasiak et al, 2021</a>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<h2 class="anchored">
7.3 Reflection
</h2>
<p>This week’s contents helped me understand the particular characteristics of remote sensing ML models. As ML models are grounded on spatial data, spatial autocorrelation is always inherent in the data we use.</p>
<p>Building a ML model without understanding this distinctive feature would result in a misleading classification.</p>
<p>Moreover, I was pleased to see what we learnt in the previous term (<strong>Moran’s I</strong>) comes into play in solving spatial autocorrelation in ML models. This reinforced my understanding of previous lessons as well as connected it to new concepts and methodologies.</p>
<p><em>A bit of thought…..</em></p>
<ul>
<li><p>The object-based non-spatial CV is just an alternative of spatial CV when the sample size is not too large.</p></li>
<li><p>If we are classifying land cover types other than forest stands, would this optimal sample number be different from the forest stands? What is the optimal number of sample sizes that we are safe to use non-spatial CV to assess remote sensing ML model?</p></li>
</ul>
<p>In closing this week’s diary, I would like to look into any other new ML models in remote sensing which are not covered in the lecture, and their usage in urban environments.</p>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-karasiak" class="csl-entry" role="doc-biblioentry">
Karasiak, Nicolas, Jean-François Dejoux, Claude Monteil, and David Sheeren. 2021. <span>“Spatial Dependence Between Training and Test Sets: Another Pitfall of Classification Accuracy Assessment in Remote Sensing.”</span> <em>Machine Learning</em>. <a href="https://doi.org/10.1007/s10994-021-05972-1">https://doi.org/10.1007/s10994-021-05972-1</a>.
</div>
<div id="ref-manolakislockwoodcooley2016" class="csl-entry" role="doc-biblioentry">
Manolakis, Dimitris G., Ronald B. Lockwood, and Thomas W. Cooley. 2016. <span>“Spectral Mixture Analysis.”</span> In, 443493. Cambridge: Cambridge University Press. <a href="https://doi.org/10.1017/CBO9781316017876.010">https://doi.org/10.1017/CBO9781316017876.010</a>.
</div>
<div id="ref-articlea" class="csl-entry" role="doc-biblioentry">
Roberts, Dar, M. Gardner, R. Church, Susan Ustin, George Scheer, and R. O. Green. 1998. <span>“Mapping Chaparral in the Santa Monica Mountains Using Multiple Endmember Spectral Mixture Models.”</span> <em>Remote Sensing of Environment</em> 65 (September). <a href="https://doi.org/10.1016/S0034-4257(98)00037-6">https://doi.org/10.1016/S0034-4257(98)00037-6</a>.
</div>
<div id="ref-tobler" class="csl-entry" role="doc-biblioentry">
Tobler, W. R. 1970. <span>“A Computer Movie Simulating Urban Growth in the Detroit Region.”</span> <em>Economic Geography</em> 46: 234240. <a href="http://www.jstor.org/stable/143141">http://www.jstor.org/stable/143141</a>.
</div>
</div>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./week_6.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Classification I</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./week_8.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Urban Heat Island</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>