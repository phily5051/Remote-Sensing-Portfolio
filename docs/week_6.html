<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Phil’s remote sensing learning diary - 6&nbsp; Week 6</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./week_7.html" rel="next">
<link href="./week_5.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week 6</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Phil’s remote sensing learning diary</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Week 1</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Week 2</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_3.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Week 3</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_4.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Week 4</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_5.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Week 5</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_6.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week 6</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_7.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week 7</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_8.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Week 8</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week 6</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<h1>
6 Classification Methods 1
</h1>
<h2 class="anchored">
6.1 Summary
</h2>
<p>The classification methods can be divided into two approach - unsupervised and supervised algorithms. However, this diary will mainly focus on the <u>supervised algorithms</u>.</p>
<p>Supervised ML follows the following process:</p>
<pre><code>- Class definition
- Pre-processing
- Training
- Pixel assignment
- Accuracy assessment</code></pre>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/supervised_process.png" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Supervised Classification Process in Remote Sensing (Source: <a href="https://gisgeography.com/supervised-unsupervised-classification-arcgis/">GISgeography</a>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<h3 class="anchored">
6.1.1 Random Forests (RF)
</h3>
<ul>
<li>General Information about RF</li>
</ul>
<p><strong>RF</strong> simply means that <u>many are better than one</u>. We do “<em>bootstrap</em>” samples (<em>bagging</em> - only 70% of data is used), and create nodes with random number of variables and on and on. Eventually, we will make many decision trees from random number of variables. These different decision trees are called a forest.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/rf_flowchart.jpg" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Random Forests Classification (Source: <a href="https://doi.org/10.1080/01431161.2018.1479794">Feng et al, 2018</a>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>How a decision is generated in RF?</li>
</ul>
<p>We test this forest with the samples that were not used to create the decision trees. These samples are called “<em>Out of Bag (OOB)</em>” (30%). The <strong>majority of decisions</strong> made on the OOB are chosen, and the proportion fo OOB incorrectly classified are called OOB error.</p>
<p>For example, when we want to classify a pixel, if the majority of decision trees says it is an urban area, the pixel is categorised as an urban area. One thing to note is that OOB is different from test data as test data are never included in building decision trees.</p>
<h3 class="anchored">
6.1.2 Support Vector Machine (SVM)
</h3>
<ul>
<li>General Information about SVM</li>
</ul>
<p><strong>SVM</strong> is a maximum margin classifier. SVM looks for a place where it can separate datasets most effectively. The benefit of SVM is that it uses structural risk minimisation which <code>minimises errors on unseen data</code>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/svm.png" class="img-fluid figure-img" style="width:60.0%"></p>
<p></p><figcaption class="figure-caption">Illustration of Support Vector Machine (Source: <a href="https://medium.com/@skilltohire/support-vector-machines-4d28a427ebd">skilltohire</a>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The distance from the diving line to the closest points is called the <code>maximum margin</code>. However, sometimes points from some datasets are very close to points of other datasets, which could lead to misclassification.</p>
<p><strong>Terminology</strong></p>
<table class="table">
<colgroup>
<col style="width: 14%">
<col style="width: 85%">
</colgroup>
<thead>
<tr class="header">
<th>Term</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Soft margin</td>
<td><ul>
<li>allows some wrongly classified points to get the overall best results</li>
<li><strong>underfitting</strong> problem as outliers are included within the margins</li>
</ul></td>
</tr>
<tr class="even">
<td>Hard margin</td>
<td><ul>
<li>does not allow any misclassification</li>
<li><strong>overfitting</strong> issue</li>
</ul></td>
</tr>
</tbody>
</table>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/svm_margin.png" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Hard and Soft margin (Source: <a href="https://www.vebuso.com/2020/02/a-top-machine-learning-algorithm-explained-support-vector-machines-svms/">Velocity Business Solutions</a>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>Parameters of SVM</strong>:</p>
<p>The best values for C and gamma can be searched through using <u>grid search</u>, which tests every possible values for the hyper-parameters</p>
<table class="table">
<colgroup>
<col style="width: 15%">
<col style="width: 84%">
</colgroup>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>C</td>
<td><ul>
<li>determines the extent of misclassification that SVM can allow</li>
<li>If ‘C’ is large, SVM has a hard margin</li>
<li>If ‘C’ is small, SVM has a soft margin</li>
</ul></td>
</tr>
<tr class="even">
<td>Kernel</td>
<td><ul>
<li>transforms the data when the data cannot be linearly separated</li>
</ul></td>
</tr>
<tr class="odd">
<td>Gamma</td>
<td><ul>
<li>defines the decision boundary</li>
<li>The larger the ‘gamma’ is, the higher probability of overfitting is</li>
<li>The smaller the ‘gamma’ is, the more linear the decision boundary is, which might cause underfitting issues.</li>
</ul></td>
</tr>
</tbody>
</table>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/svm_kernel.png" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Kernel trick which projects data to a higher dimensional space (Source: <a href="https://towardsdatascience.com/support-vector-machines-svm-clearly-explained-a-python-tutorial-for-classification-problems-29c539f3ad8">Towards Data Science</a>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/svm_gamma.png" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Illustration of how change in gamma affects the decision boundary (Source: <a href="https://www.analyticsvidhya.com/blog/2021/06/support-vector-machine-better-understanding/">Analytics Vidhya</a>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>What is the example of the application of SVM?</li>
</ul>
<p>Let’s say ‘pixel 1’ has values for band 1, band 2, band 3, and so on. For reference, a pixel which has a number of band values is called <strong>Pattern vector</strong>. If there are forests, they will have many pattern vectors. If we put these into a feature space, these pattern vectors will be very close and on top of each other. This is the moment where SVM can come into play and separate them by allowing some misclassification.</p>
<h2 class="anchored">
6.2 Applications
</h2>
<h3 class="anchored">
6.2.1 General Background
</h3>
<p>Some land covers, such as wetland, are hard to classify due to unclear distinction with other surrounding land covers, massive seasonal changes in vegetation and hydrological variation. In this section, I looked into how somewhat classification-wise challenging land covers can be classified in conjunction with ML algorithms.</p>
<h3 class="anchored">
6.2.2 Brief Information about a Research
</h3>
<p><span class="citation" data-cites="rs8110954">Tian et al. (<a href="references.html#ref-rs8110954" role="doc-biblioref">2016</a>)</span> aimed to classify wetland land cover by <strong>fusing</strong> the <code>Pléiade-1B data</code> with <code>multi-date Landsat-8 data</code>. The former was performed based on an <em>object-oriented approach</em>, and the <em>geometric</em> and <em>spectral features</em> were extracted. From the latter, the <em>normalized difference vegetation index (NDVI)</em> data were calculated and this enabled to reflect <u>phenological changes in vegetation</u>. The feature datasets obtained from two sensors were optimised and used to build a <code>RF model</code>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/wk6_application_abstract.png" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Flowchart of building a RF Model (Source: <span class="citation" data-cites="rs8110954">Tian et al. (<a href="references.html#ref-rs8110954" role="doc-biblioref">2016</a>)</span>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The RF classifier obtained an overall accuracy of 93 % and the research team found out that the inclusion of the <em>geometric shapes</em> improved the <em>classification accuracy of the farming lands and water bodies by 5% - 10%</em>.</p>
<p>In addition, there has been a challenge in classifying wetland due to similar spectral features of vegetation covers. By making use of the <em>phenological difference</em> and the <em>textual information</em>, the team reduced the classification errors and <u>improved the overall accuracy about 10%</u>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/wk6_result_contribution.png" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Importance of Features in the RF model (Source: <span class="citation" data-cites="rs8110954">Tian et al. (<a href="references.html#ref-rs8110954" role="doc-biblioref">2016</a>)</span>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The classification result of the RF model was compared with other ML classification methods such as Support Vector Machine (SVM) and Artificial Neural Network (ANN). The research team found that the overall accuracy of the RF model was 10% higher than that of the SVM and ANN classifiers.</p>
<h3 class="anchored">
6.2.3 Insight from the findings
</h3>
<p>The classification results bring us back to a question we had in the lecture.</p>
<p><strong>‘Does the most advanced ML classification method always achieves the best results?’</strong></p>
<p>As shown in the results, the most advanced ML algorithms - SVM and ANN - did not achieve the best classification results. They were 10% behind the overall accuracy compared to the RF model’s result.</p>
<p>The author stated that the way that RF model builds <code>each decision tree was significan</code>t in achieving a higher accuracy. In the RF model, each decision tree is a <strong>“specialist tree”</strong> which considers the <code>feature domain</code> - the data from <u>geometric and textual features</u>.</p>
<p>For instance, the lakes which are characterised as being large and in a circular shape with a smoother shoreline, which are rather easy to classify. However, marshes and ponds inherit heterogeneous features, and are in irregular shape, which pose difficulties in classifying them.</p>
<p>Therefore, the <strong>specialist trees</strong> grown with considerations for these features in the RF model explain why the RF model achieved a higher accuracy. What we can learn from this research is that the <strong>location- and context-specific ML algorithm is required</strong> to achieve a better classification accuracy. <u>The most advanced and state-of-the-art algorithms do not guarantee the best results</u>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/wk6_research_area.png" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Research Area (Source: <span class="citation" data-cites="rs8110954">Tian et al. (<a href="references.html#ref-rs8110954" role="doc-biblioref">2016</a>)</span>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/wk6_application_results.png" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">The Classification Results of Different ML Methods - (a) RF; (b) SVM; (c) ANN (Source: <span class="citation" data-cites="rs8110954">Tian et al. (<a href="references.html#ref-rs8110954" role="doc-biblioref">2016</a>)</span>)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<h2 class="anchored">
6.3 Reflections
</h2>
<p>The week 6’s lecture covers a number of ML algorithms that are being used in satellite imagery classification. These classification methods are employed to better distinguish one band from the other band which help classifying land cover in the image. They essentially do the same functionality in classifying data but they do it in different ways.</p>
<p>However, there are some aspects that we have to ponder. Firstly, these classifiers often make things very <code>complicated</code>. While state-of-the-art ML algorithms are highly accurate, they are very difficult to interpret.</p>
<p>Secondly, we need to consider <code>why we are using a specific ML algorithm to classify our data</code>. If we could differentiate one band from the other with a simple method, is there still a necessity to use a highly developed classification method?</p>
<p>The last but not the least, we have to think about <code>classification itself</code>. In reality, one pixel is not solely composed of one type of land cover types. It can co-exist with other types of land cover types. Therefore, we need to contemplate on to what extent we have to classify or ignore the values in a pixel.</p>
<p>As a whole, the lecture enabled me to think critically about</p>
<p><em>Why we use this method?</em></p>
<p>and</p>
<p><em>What are the assumptions of this specific method and are we aware of them?</em></p>
<p>The comprehensive understanding of the rationale behind the ML algorithm will help me choose an appropriate method based on data I am trying to analyse. Moreover, this will enable me to comprehend not only the accuracy of the model but to approach to my data in a holistic manner.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/mixed_pixels.png" style="width:60.0%;height:40.0%" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Classification of Pixels (Source: <a href="https://www.researchgate.net/figure/Four-causes-of-mixed-pixels_fig3_242103275">Peter Fisher</a>)</figcaption><p></p>
</figure>
</div>
</div>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-rs8110954" class="csl-entry" role="doc-biblioentry">
Tian, Shaohong, Xianfeng Zhang, Jie Tian, and Quan Sun. 2016. <span>“Random Forest Classification of Wetland Landcovers from Multi-Sensor Data in the Arid Region of Xinjiang, China.”</span> <em>Remote Sensing</em> 8 (11). <a href="https://doi.org/10.3390/rs8110954">https://doi.org/10.3390/rs8110954</a>.
</div>
</div>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./week_5.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Week 5</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./week_7.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week 7</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>